<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ø­ØµØ±ÙŠ - TR111</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#0e0f12;--card:#15171b;--text:#e8edf5;--line:#242833;--accent:#d4af37}
*{box-sizing:border-box}
body{
  margin:0;font-family:'Tajawal','Cairo',sans-serif;color:var(--text);
  display:flex;justify-content:center;align-items:center;height:100vh;
  background:#000;overflow:hidden
}
canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;background:black}
.cA{
  background:rgba(0,0,0,0.85);border:2px solid var(--accent);
  border-radius:20px;box-shadow:0 0 25px rgba(212,175,55,0.6);
  padding:20px;text-align:center;width:min(520px,94vw)
}
.tA{color:#fff;font-size:20px;margin-bottom:10px;text-shadow:0 0 8px var(--accent)}
.rA{display:flex;justify-content:space-between;align-items:center;
    border-top:1px solid var(--line);padding:10px 0}
.lA{color:#d8dfec}.vA{font-weight:900;font-variant-numeric:tabular-nums}
.adj-container{display:flex;justify-content:center;gap:12px;margin-top:8px;flex-wrap:wrap}
.adj-box{background:#111;border:1px solid var(--accent);border-radius:8px;
         padding:6px 10px;display:flex;align-items:center;gap:4px}
.adj-box span{color:var(--accent);font-size:14px}
.adj-box button{background:var(--accent);border:none;color:#000;font-weight:bold;
                width:22px;height:22px;border-radius:4px;cursor:pointer}
.btns{display:flex;justify-content:center;gap:10px;margin-top:8px}
.save-btn,.reset-btn{
  background:var(--accent);border:none;padding:6px 14px;
  border-radius:8px;font-weight:bold;cursor:pointer;color:#000
}
.reset-btn{background:#444;color:#fff;border:1px solid var(--accent)}
.fA{margin-top:12px;color:#b8c1d4;font-size:.9rem;opacity:.9}
.fA span{color:var(--accent);font-weight:700}

/* Ù‚Ø³Ù… Resupply */
.resupply{
  margin-top:20px;border-top:1px solid var(--line);padding-top:15px
}
.resupply h3{
  color:var(--accent);font-size:18px;margin-bottom:8px;
  text-shadow:0 0 8px var(--accent)
}
.resupply input{
  width:70%;padding:8px;font-size:16px;border-radius:8px;
  border:1px solid var(--accent);background:#000;color:#fff;text-align:center;
  outline:none;margin-top:6px;box-shadow:0 0 10px rgba(212,175,55,0.4);
}
.resupply button{
  margin-top:10px;padding:8px 16px;font-size:16px;
  background:linear-gradient(90deg,#bfa140,#d4af37);border:none;border-radius:8px;
  color:#000;font-weight:bold;cursor:pointer;
  box-shadow:0 0 15px rgba(212,175,55,0.4)
}
.resupply button:hover{transform:scale(1.05);box-shadow:0 0 25px rgba(212,175,55,0.6);}
#resResult{margin-top:10px;font-size:15px;color:#fff;line-height:1.6}
#resTimer{margin-top:12px;font-size:18px;color:var(--accent);text-shadow:0 0 8px var(--accent)}
#resNote{margin-top:6px;color:#ffcc44;font-weight:bold;text-shadow:0 0 6px #ffb700;display:none}
</style>
</head>
<body>

<canvas id="cnv_mx"></canvas>
<div class="cA">
  <div class="tA">Ø®Ø§Øµ Ø¨Ù„Ø¹Ø¨Ø© Red Dead Online</div>

  <div class="rA"><div class="lA">Ø§Ù„ÙˆÙ‚Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø©:</div><div class="vA" id="id_gm">--:--</div></div>
  <div class="rA"><div class="lA">ØªØ¬Ø¯ÙŠØ¯ Ù…Ø´ØªØ±ÙŠ Ø§Ù„Ù…ÙˆÙ†Ø´Ø§ÙŠÙ†:</div><div class="vA" id="id_mn">--:--:--</div></div>
  <div class="rA"><div class="lA">ØªØ¬Ø¯ÙŠØ¯ Ø­ÙŠÙˆØ§Ù†Ø§Øª Ù‡Ø§Ø±ÙŠØª:</div><div class="vA" id="id_ht">--:--:--</div></div>

  <div class="adj-container">
    <div class="adj-box">
      <span>Ø¯Ù‚Ø§Ø¦Ù‚:</span>
      <button id="minMinus">-</button>
      <span id="minVal">0</span>
      <button id="minPlus">+</button>
    </div>
    <div class="adj-box">
      <span>Ø«ÙˆØ§Ù†ÙŠ:</span>
      <button id="secMinus">-</button>
      <span id="secVal">0</span>
      <button id="secPlus">+</button>
    </div>
  </div>

  <div class="btns">
    <button class="save-btn" id="saveBtn">ğŸ’¾ Ø­ÙØ¸</button>
    <button class="reset-btn" id="resetBtn">ğŸ” Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¶Ø¨Ø·</button>
  </div>

  <!-- âœ… Ù‚Ø³Ù… Ø­Ø§Ø³Ø¨Ø© Resupply -->
  <div class="resupply">
    <h3>ğŸ§® Ø­Ø§Ø³Ø¨Ø© Resupply  Ùˆ Ø§Ù„ØªØ§Ø¬Ø±</h3>
    <input type="text" id="resInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù…Ø«Ù„Ø§Ù‹ 73">
    <button id="resCalc">Ø§Ø­Ø³Ø¨</button>
    <div id="resResult"></div>
    <button id="resStart">â±ï¸ ØªØ´ØºÙŠÙ„ Ù…Ø¤Ù‚Øª Resupply</button>
    <div id="resTimer"></div>
    <div id="resNote">âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø©: ÙˆÙØ± Ù„ÙƒØ±Ø¨Ø³ Ø¬Ù„ÙˆØ¯ Ù„ÙƒÙŠ Ù„Ø§ ÙŠØªÙˆÙ‚Ù</div>
  </div>

  <div class="fA"><span id="ft"></span></div>
</div>

<script>
// ============ Ø®Ù„ÙÙŠØ© Matrix Ø§Ù„Ø°Ù‡Ø¨ÙŠØ© ============
!function(){
  const c=document.getElementById("cnv_mx"),g=c.getContext("2d");
  function s(){c.height=innerHeight;c.width=innerWidth}
  addEventListener("resize",s,{passive:!0});s();
  const L="01",F=14;let C=Math.floor(c.width/F),D=new Array(C).fill(1);
  function r(){const n=Math.floor(c.width/F);if(n!==C){C=n;D=new Array(C).fill(1)}}
  function d(){r();g.fillStyle="rgba(0,0,0,0.05)";
    g.fillRect(0,0,c.width,c.height);
    g.fillStyle="#FFD700";g.font=F+"px monospace";
    for(let i=0;i<D.length;i++){
      const ch=L.charAt(Math.floor(Math.random()*L.length));
      g.fillText(ch,i*F,D[i]*F);
      if(D[i]*F>c.height&&Math.random()>0.975)D[i]=0;D[i]++;
    }}
  setInterval(d,35);
}();

// ============ Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª ============
(function(){
  const pad=n=>(n<10?"0":"")+n;
  const MOON_CYCLE=96*60;
  const HARRIET_CYCLE=48*60+2;

  function secondsUTC(d){return d.getUTCHours()*3600+d.getUTCMinutes()*60+d.getUTCSeconds()}
  function remainMoon(){const utc=secondsUTC(new Date());return MOON_CYCLE-(utc%MOON_CYCLE)}
  function gameTime(){
    const n=new Date(),gt=new Date(n.getTime()*30);
    let h=gt.getUTCHours(),m=gt.getUTCMinutes(),P=h>=12?"Ù…":"Øµ";
    h=h%12;if(h===0)h=12;return pad(h)+":"+pad(m)+" "+P;
  }
  function fmt(sec){sec=Math.floor(Math.max(0,sec));
    const h=Math.floor(sec/3600),m=Math.floor((sec%3600)/60),s=sec%60;
    return pad(h)+":"+pad(m)+":"+pad(s);
  }

  const gm=document.getElementById("id_gm"),
        mn=document.getElementById("id_mn"),
        ht=document.getElementById("id_ht");

  let offMin=parseInt(localStorage.getItem("offMin")||"0");
  let offSec=parseInt(localStorage.getItem("offSec")||"0");

  function remainHarriet(){
    let utc = secondsUTC(new Date()) - (offMin*60 + offSec);
    utc = ((utc % 86400) + 86400) % 86400;
    let rem = HARRIET_CYCLE - (utc % HARRIET_CYCLE);
    if (rem < 2) rem += HARRIET_CYCLE;
    return rem;
  }

  function update(){
    gm.textContent=gameTime();
    mn.textContent=fmt(remainMoon());
    ht.textContent=fmt(remainHarriet());
  }
  update();setInterval(update,1000);

  const minVal=document.getElementById("minVal"),
        secVal=document.getElementById("secVal");
  function refresh(){
    minVal.textContent=offMin>=0?`+${offMin}`:`${offMin}`;
    secVal.textContent=offSec>=0?`+${offSec}`:`${offSec}`;
  }
  refresh();

  document.getElementById("minPlus").onclick=()=>{offMin++;refresh();}
  document.getElementById("minMinus").onclick=()=>{offMin--;refresh();}
  document.getElementById("secPlus").onclick=()=>{offSec++;refresh();}
  document.getElementById("secMinus").onclick=()=>{offSec--;refresh();}

  document.getElementById("saveBtn").onclick=()=>{
    localStorage.setItem("offMin",offMin);
    localStorage.setItem("offSec",offSec);
    alert(`âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸\nØ§Ù„Ø¯Ù‚Ø§Ø¦Ù‚: ${offMin}\nØ§Ù„Ø«ÙˆØ§Ù†ÙŠ: ${offSec}`);
  };

  document.getElementById("resetBtn").onclick=()=>{
    offMin=0;offSec=0;
    localStorage.setItem("offMin","0");
    localStorage.setItem("offSec","0");
    refresh();
    alert("ğŸ” ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¶Ø¨Ø· Ø¥Ù„Ù‰ 0");
  };
})();

// ============ Ø­Ø§Ø³Ø¨Ø© Resupply ============
(function(){
  const input=document.getElementById("resInput");
  const result=document.getElementById("resResult");
  const timer=document.getElementById("resTimer");
  const note=document.getElementById("resNote");
  const btn=document.getElementById("resStart");
  const alarm=new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg");

  const MINUTES_PER_UNIT=2;
  const TIMER_DURATION=50*60*1000;
  let timerActive=false, timerEnd=null, interval=null;

  document.getElementById("resCalc").onclick=function(){
    const val=parseInt(
  input.value
    .replace(/[Ù -Ù©]/g, d => "Ù Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©".indexOf(d))  // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
    .replace(/[^\d]/g,"")                              // Ø­Ø°Ù Ø£ÙŠ Ø±Ù…ÙˆØ² Ø£Ø®Ø±Ù‰
);
    if(isNaN(val)||val<0||val>=100){
      result.innerHTML="âš ï¸ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù…Ù‹Ø§ ØµØ­ÙŠØ­Ù‹Ø§ Ø¨ÙŠÙ† 0 Ùˆ99";
      return;
    }
    const remaining=100-val;
    const totalMin=remaining*MINUTES_PER_UNIT;
    const h=Math.floor(totalMin/60),m=totalMin%60;
    result.innerHTML=`â³ Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${val}%<br>ğŸ§® Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ø­ØªÙ‰ Ø§Ù„Ø§Ù…ØªÙ„Ø§Ø¡: ${h} Ø³Ø§Ø¹Ø© ${m} Ø¯Ù‚ÙŠÙ‚Ø©<br>âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø©: Ù…Ù‡Ù…Ø© Resupply ØºÙŠØ± Ù…Ø­Ø³ÙˆØ¨Ø©<br>ğŸ’¡ Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ø«Ø§Ø¨ØªØ© Ù„Ù…Ù‡Ù…Ø© Resupply Ù‡ÙŠ Ù¥Ù  Ø¯Ù‚ÙŠÙ‚Ø©.`;
  };

  function updateTimer(){
    const rem=Math.max(0,Math.floor((timerEnd-Date.now())/1000));
    if(rem<=0){
      clearInterval(interval);
      timer.textContent="â° Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ù…Ø¤Ù‚Øª!";
      note.style.display="none";
      timerActive=false;
      localStorage.removeItem("resupply_end");
      let count=0; const play=()=>{alarm.currentTime=0;alarm.play();if(++count<3)setTimeout(play,1200)};play();
      btn.textContent="â±ï¸ ØªØ´ØºÙŠÙ„ Ù…Ø¤Ù‚Øª Resupply";
      return;
    }
    const m=Math.floor(rem/60),s=rem%60;
    timer.textContent=`Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${m.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;
  }

  btn.onclick=function(){
    if(!timerActive){
      timerEnd=Date.now()+TIMER_DURATION;
      localStorage.setItem("resupply_end",timerEnd);
      timerActive=true;
      btn.textContent="â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª Resupply";
      note.style.display="block";
      updateTimer();
      interval=setInterval(updateTimer,1000);
    } else {
      clearInterval(interval);
      timerActive=false;
      localStorage.removeItem("resupply_end");
      timer.textContent="";
      note.style.display="none";
      btn.textContent="â±ï¸ ØªØ´ØºÙŠÙ„ Ù…Ø¤Ù‚Øª Resupply";
    }
  };

  const saved=localStorage.getItem("resupply_end");
  if(saved && Date.now()<saved){
    timerEnd=parseInt(saved);
    timerActive=true;
    btn.textContent="â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª Resupply";
    note.style.display="block";
    updateTimer();
    interval=setInterval(updateTimer,1000);
  } else {
    localStorage.removeItem("resupply_end");
  }
})();

// ============ Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ ============
(function(){
  try{
    const b64="2KjYsdmF2KzYqSDZiNmB2YPYsdipINin2YTYudiz2YrYsdmKIFRlbGVncmFtIEBUUjExMQ==";
    const bin=atob(b64);
    const esc=bin.split("").map(c=>"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)).join("");
    document.getElementById("ft").textContent=decodeURIComponent(esc);
  }catch(e){}
})();
</script>

</body>
</html>
