<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>حصري - TR111</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#0e0f12;--card:#15171b;--text:#e8edf5;--line:#242833;--accent:#d4af37}
*{box-sizing:border-box}
body{
  margin:0;font-family:'Tajawal','Cairo',sans-serif;color:var(--text);
  display:flex;justify-content:center;align-items:center;height:100vh;
  background:#000;overflow:hidden
}
canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;background:black}
.cA{
  background:rgba(0,0,0,0.85);border:2px solid var(--accent);
  border-radius:20px;box-shadow:0 0 25px rgba(212,175,55,0.6);
  padding:20px;text-align:center;width:min(520px,94vw)
}
.tA{color:#fff;font-size:20px;margin-bottom:10px;text-shadow:0 0 8px var(--accent)}
.rA{display:flex;justify-content:space-between;align-items:center;
    border-top:1px solid var(--line);padding:10px 0}
.lA{color:#d8dfec}.vA{font-weight:900;font-variant-numeric:tabular-nums}
.adj-container{display:flex;justify-content:center;gap:12px;margin-top:8px;flex-wrap:wrap}
.adj-box{background:#111;border:1px solid var(--accent);border-radius:8px;
         padding:6px 10px;display:flex;align-items:center;gap:4px}
.adj-box span{color:var(--accent);font-size:14px}
.adj-box button{background:var(--accent);border:none;color:#000;font-weight:bold;
                width:22px;height:22px;border-radius:4px;cursor:pointer}
.btns{display:flex;justify-content:center;gap:10px;margin-top:8px}
.save-btn,.reset-btn{
  background:var(--accent);border:none;padding:6px 14px;
  border-radius:8px;font-weight:bold;cursor:pointer;color:#000
}
.reset-btn{background:#444;color:#fff;border:1px solid var(--accent)}
.fA{margin-top:12px;color:#b8c1d4;font-size:.9rem;opacity:.9}
.fA span{color:var(--accent);font-weight:700}
</style>
</head>
<body>

<canvas id="cnv_mx"></canvas>
<div class="cA">
  <div class="tA">خاص بلعبة Red Dead Online</div>

  <div class="rA"><div class="lA">الوقت داخل اللعبة:</div><div class="vA" id="id_gm">--:--</div></div>
  <div class="rA"><div class="lA">تجديد مشتري المونشاين:</div><div class="vA" id="id_mn">--:--:--</div></div>
  <div class="rA"><div class="lA">تجديد حيوانات هاريت:</div><div class="vA" id="id_ht">--:--:--</div></div>

  <div class="adj-container">
    <div class="adj-box">
      <span>دقائق:</span>
      <button id="minMinus">-</button>
      <span id="minVal">0</span>
      <button id="minPlus">+</button>
    </div>
    <div class="adj-box">
      <span>ثواني:</span>
      <button id="secMinus">-</button>
      <span id="secVal">0</span>
      <button id="secPlus">+</button>
    </div>
  </div>

  <div class="btns">
    <button class="save-btn" id="saveBtn">💾 حفظ</button>
    <button class="reset-btn" id="resetBtn">🔁 إعادة الضبط</button>
  </div>

  <div class="fA"><span id="ft"></span></div>
</div>

<script>
// ============ خلفية Matrix الذهبية ============
!function(){
  const c=document.getElementById("cnv_mx"),g=c.getContext("2d");
  function s(){c.height=innerHeight;c.width=innerWidth}
  addEventListener("resize",s,{passive:!0});s();
  const L="01",F=14;let C=Math.floor(c.width/F),D=new Array(C).fill(1);
  function r(){const n=Math.floor(c.width/F);if(n!==C){C=n;D=new Array(C).fill(1)}}
  function d(){r();g.fillStyle="rgba(0,0,0,0.05)";
    g.fillRect(0,0,c.width,c.height);
    g.fillStyle="#FFD700";g.font=F+"px monospace";
    for(let i=0;i<D.length;i++){
      const ch=L.charAt(Math.floor(Math.random()*L.length));
      g.fillText(ch,i*F,D[i]*F);
      if(D[i]*F>c.height&&Math.random()>0.975)D[i]=0;D[i]++;
    }}
  setInterval(d,35);
}();

// ============ العدادات ============
(function(){
  const pad=n=>(n<10?"0":"")+n;
  const MOON_CYCLE=96*60;
  const HARRIET_CYCLE=48*60+2; // ✅ ثانيتان إضافيتان مخفية لكل دورة

  function secondsUTC(d){return d.getUTCHours()*3600+d.getUTCMinutes()*60+d.getUTCSeconds()}
  function remainMoon(){const utc=secondsUTC(new Date());return MOON_CYCLE-(utc%MOON_CYCLE)}
  function gameTime(){
    const n=new Date(),gt=new Date(n.getTime()*30);
    let h=gt.getUTCHours(),m=gt.getUTCMinutes(),P=h>=12?"م":"ص";
    h=h%12;if(h===0)h=12;return pad(h)+":"+pad(m)+" "+P;
  }
  function fmt(sec){sec=Math.floor(Math.max(0,sec));
    const h=Math.floor(sec/3600),m=Math.floor((sec%3600)/60),s=sec%60;
    return pad(h)+":"+pad(m)+":"+pad(s);
  }

  const gm=document.getElementById("id_gm"),
        mn=document.getElementById("id_mn"),
        ht=document.getElementById("id_ht");

  let offMin=parseInt(localStorage.getItem("offMin")||"0");
  let offSec=parseInt(localStorage.getItem("offSec")||"0");

  function remainHarriet(){
    let utc = secondsUTC(new Date()) - (offMin*60 + offSec);
    utc = ((utc % 86400) + 86400) % 86400;
    let rem = HARRIET_CYCLE - (utc % HARRIET_CYCLE);
    // ✅ إذا الوقت أقل من ثانيتين، نضيف دورة جديدة كاملة
    if (rem < 2) rem += HARRIET_CYCLE;
    return rem;
  }

  function update(){
    gm.textContent=gameTime();
    mn.textContent=fmt(remainMoon());
    ht.textContent=fmt(remainHarriet());
  }
  update();setInterval(update,1000);

  const minVal=document.getElementById("minVal"),
        secVal=document.getElementById("secVal");
  function refresh(){
    minVal.textContent=offMin>=0?`+${offMin}`:`${offMin}`;
    secVal.textContent=offSec>=0?`+${offSec}`:`${offSec}`;
  }
  refresh();

  document.getElementById("minPlus").onclick=()=>{offMin++;refresh();}
  document.getElementById("minMinus").onclick=()=>{offMin--;refresh();}
  document.getElementById("secPlus").onclick=()=>{offSec++;refresh();}
  document.getElementById("secMinus").onclick=()=>{offSec--;refresh();}

  document.getElementById("saveBtn").onclick=()=>{
    localStorage.setItem("offMin",offMin);
    localStorage.setItem("offSec",offSec);
    alert(`✅ تم الحفظ\nالدقائق: ${offMin}\nالثواني: ${offSec}`);
  };

  document.getElementById("resetBtn").onclick=()=>{
    offMin=0;offSec=0;
    localStorage.setItem("offMin","0");
    localStorage.setItem("offSec","0");
    refresh();
    alert("🔁 تمت إعادة الضبط إلى 0");
  };
})();

// ============ التوقيع ============
(function(){
  try{
    const b64="2KjYsdmF2KzYqSDZiNmB2YPYsdipINin2YTYudiz2YrYsdmKIFRlbGVncmFtIEBUUjExMQ==";
    const bin=atob(b64);
    const esc=bin.split("").map(c=>"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)).join("");
    document.getElementById("ft").textContent=decodeURIComponent(esc);
  }catch(e){}
})();
</script>

</body>
</html>
